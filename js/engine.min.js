var Engine=(function(global){'use strict';var doc=global.document,win=global.window,canvas=doc.createElement('canvas'),ctx=canvas.getContext('2d'),lastTime,reqID,lives;canvas.width=505;canvas.height=606;doc.getElementById('field').appendChild(canvas);function updateEntities(dt){token.update();allEnemies.forEach(function(enemy){enemy.update(dt);lives=player.update();});}
function update(dt){updateEntities(dt);}
function renderEntities(){token.render();allEnemies.forEach(function(enemy){enemy.render();});player.render();}
function render(){var rowImages=['images/water-block.png','images/stone-block.png','images/stone-block.png','images/stone-block.png','images/grass-block.png','images/grass-block.png'],numRows=rowImages.length,numCols=5,row,col;for(row=0;row<numRows;row++){for(col=0;col<numCols;col++){ctx.drawImage(Resources.get(rowImages[row]),col*BLOCK_WIDTH,row*BLOCK_HEIGHT);}}
renderEntities();}
function drawSafetyZone(){ctx.fillStyle="#5069d4";ctx.fillRect(0,23,505,50);ctx.strokeStyle="#000";ctx.strokeRect(0,23,505,51);ctx.strokeStyle="#fff";ctx.strokeRect(1,24,504,50);ctx.textAlign="left";ctx.font="1.5em Calibri";ctx.fillStyle="#5fc148";ctx.scale(3.8,1);ctx.fillText("SAFETY ZONE",1,45,505);ctx.setTransform(1,0,0,1,0,0);}
function reset(){}
function gameOver(){var x=canvas.width/2,y=canvas.height/2;ctx.textAlign="center";ctx.font="bold italic 4em 'Gochi Hand'";ctx.fillStyle="red";ctx.fillText("awww",x,y);ctx.fillText("game over",x,y+60);ctx.strokeStyle="yellow";ctx.strokeText("awww",x,y);ctx.strokeText("game over",x,y+60);win.cancelAnimationFrame(reqID);}
function main(){var now=Date.now(),dt=(now-lastTime)/1000.0;update(dt);render();if(lives===0){gameOver();return;}
lastTime=now;reqID=win.requestAnimationFrame(main);}
function init(){reset();lastTime=Date.now();main();drawSafetyZone();}
Resources.load(['images/stone-block.png','images/water-block.png','images/grass-block.png','images/enemy-bug.png','images/ladybag.png','images/char-boy.png','images/char-cat-girl.png','images/char-horn-girl.png','images/char-pink-girl.png','images/char-princess-girl.png','images/Gem Blue.png','images/Gem Green.png','images/Gem Orange.png','images/Key.png','images/Star.png','images/Heart.png']);Resources.onReady(init);global.ctx=ctx;global.canvas=canvas;}
(this));